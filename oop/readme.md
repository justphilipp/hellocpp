# C++ 面向对象

## 1. OOP

实体（属性、行为） -> ADT(Abstract Data Type)

对象 <- （实例化） 类（属性->成员变量 行为->成员方法）

OOP语言特征：抽象、封装、继承、多态

访问限定符：

- public：给外部提供公有方法，来访问私有属性
  
- private：外部无法访问
  
- protected
  

- [ ] 类体内实现的方法，自动处理成inline内联函数
  

类外实现方法，需在方法名前添加类作用域，并不会自动处理成inline

## 2. 对象存储位置

局部对象存在栈上，全局对象存在数据段上

可以将对象存在堆上

```cpp
SeqStack *ps = new SeqStack(60);
ps -> push(1); // 通过指针访问堆上的对象
ps -> push(2);
ps -> pop();

delete ps; 
```

## 3. this指针

类的成员方法一经编译，所有的方法参数都会加一个this指针，接收调用该方法的对象的地址。

## 4. 构造函数和析构函数

实例化对象时，自动开辟空间，并调用构造函数；

析构函数可以手动调用（`object.~ClassName();`，不建议），如果没有手动调用，则在作用域结束时自动调用。

自定义构造函数，则不会自动产生默认构造函数

构造函数的初始化列表：可以指定当前对象成员变量的初始化方式（尤其对于成员对象）

成员变量的初始化和它们定义的顺序有关 ，和构造函数初始化列表中出现的先后顺序无关！

## 5. 成员变量/方法

### 5.1 普通成员方法

1. 属于类的作用域
  
2. 调用该方法时，需要依赖一个对象（编译器会添加一个this形参变量、常对象无法调用）
  
3. 可以任意访问对象的私有成员变量
  

### 5.2静态成员变量

不属于对象，而是属于类级别的声明；

static成员变量在类内声明；（如果没有声明，编译器报错No member named 'mb' in 'CMemberPtrTest'）

static成员变量一定要在类外定义并初始化；（如果没有在类外定义并初始化，运行报错undefined reference to ）

### 5.3 静态成员方法

1. 属于类的作用域
  
2. 用类名作用域来调用方法（没有this指针）
  
3. 可以任意访问对象的私有成员，但仅限于不依赖对象的成员（只能调用其他的static静态成员）
  

### 5.4 常成员方法

1. 属于类的作用域
  
2. 调用依赖一个对象，普通对象或者常对象都可以
  
3. 可以任意访问对象的私有成员，但是只能读不能写
  
4. 接收 const object *this指针，普通对象和常对象都可以调用；常对象无法调用普通成员方法，只能调用常成员方法
  
5. 只要是只读操作的成员方法，一律实现成const常成员方法
  

## 6. 指向类成员的指针

指向普通成员变量/函数的指针需要加类作用域；

指向静态成员变量/函数的指针不加类作用域。

## 7. 深拷贝和浅拷贝

对象默认的拷贝构造是做内存拷贝，如果对象占用外部资源，那么浅拷贝会出现问题。同理，默认的=操作符也是内存拷贝，即浅拷贝。
